{% extends "base.html" %}

{% block title %}
    {{ block.super }} - {{ question.title }}
{% endblock %}

{% block content %}

    <h1>{{ question.title }}</h1>

    <div class="question_details">
        <p>Автор: {{ question.author }}</p>
        <p>Вопрос: {{ question.text }}</p>
        <p>Время: {{ question.added_at }}</p>
        <p>Рейтинг: {{ question.rating }}</p>
        <div class="likes">
            <p>Понравилось:

            {% for like in question.likes.all %}
                {{ like }},
            {% endfor %}

            </p>
        </div>
    </div>

    {# <h4><a href="{% url 'add_comment' question.id %}">Написать комментарий</a></h4> #}
    {# <h4><a href="{% url 'add_comment'  question.id %}?qid={{ question.id }}">Написать комментарий</a></h4> #}

    {% for e in form.non_field_errors %}
        <div class="alert alert-danger">{{ e }}</div>
    {% endfor %}

    <form class="form-horizontal" method="post" action="{% url 'question_details' question.id %}">
        {% csrf_token %}
        <fieldset>
            {% for field in form %}
                <div class="control-group {% if field.errors %}has-error{% endif %}">
                    <label class="control-label">{{ field.label }}</label>
                    <div class="controls">{{ field }}</div>
                </div>
            {% endfor %}
        </fieldset>
        <div class="form-actions">
            <button type="submit" class="btn btn-primary">Добавить комментарий</button>
        </div>
    </form>


    <div class="comments">
        {% for answer in answers %}
            <p>Автор комментария: {{ answer.author }}</p>
            <p>Комментарий: {{ answer.text }}</p>
        {% endfor %}
    </div>


{% endblock %}
